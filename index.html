<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Object Lesson</title>
  <meta name="description" content="Uncommon Objects, Art and Design — Pasadena.">
  <link rel="icon" type="image/svg+xml" href="OL_logo.svg">
  <!-- Open Graph -->
  <meta property="og:title" content="Object Lesson">
  <meta property="og:description" content="Uncommon Objects, Art and Design — Pasadena.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://objectlesson.la/">
  <meta property="og:image" content="https://objectlesson.la/Asset%201.png">
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Object Lesson">
  <meta name="twitter:description" content="Uncommon Objects, Art and Design — Pasadena.">
  <meta name="twitter:image" content="https://objectlesson.la/Asset%201.png">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' https://raw.githubusercontent.com data:; connect-src 'self' https://*.supabase.co https://ol-checkout.objectlesson.workers.dev https://raw.githubusercontent.com">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Grid View -->
  <div id="view-grid">
    <header>
      <a class="loc-pill" href="#about">Visit</a>
      <a href="/">
        <img src="OL_logo.svg" alt="Object Lesson" class="logo">
      </a>
      <a class="ig-pill" href="https://instagram.com/objectlesson_la" target="_blank" rel="noopener">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg>
      </a>
    </header>

    <div class="mosaic" id="mosaic"></div>

    <div class="filter-bar">
      <div class="filter-wrap">
        <button class="filter-btn" id="filter-btn">
          <svg class="filter-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/><line x1="1" y1="14" x2="7" y2="14"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="17" y1="16" x2="23" y2="16"/></svg>
          <span id="filter-label">All</span>
        </button>
        <div class="filter-dropdown" id="filter-dropdown">
          <button class="filter-opt active" data-category="all">All</button>
          <button class="filter-opt" data-category="under-400">Under $400</button>
          <button class="filter-opt" data-category="wall-art">Wall Art</button>
          <button class="filter-opt" data-category="object">Object</button>
          <button class="filter-opt" data-category="ceramic">Ceramic</button>
          <button class="filter-opt" data-category="furniture">Furniture</button>
          <button class="filter-opt" data-category="light">Light</button>
          <button class="filter-opt" data-category="sculpture">Sculpture</button>
          <button class="filter-opt" data-category="misc">Misc</button>
        </div>
      </div>
    </div>

    <main>
      <div class="grid" id="product-grid"></div>
      <div class="loading" id="loading"><div class="loading-dot"></div></div>
      <p class="empty" id="empty">Nothing here yet.</p>
    </main>

    <footer>
      <div class="footer-inner">
        <span class="footer-copy">Object Lesson 2026</span>
        <div class="footer-links">
          <a href="https://instagram.com/objectlesson_la" target="_blank" rel="noopener"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg></a>
          <a href="sms:3104985138">Contact</a>
        </div>
      </div>
    </footer>
  </div>

  <!-- Detail View -->
  <div id="view-detail" style="display:none">
    <header class="detail-header">
      <button class="detail-back" id="btn-detail-back">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
      </button>
      <a href="/">
        <img src="OL_logo.svg" alt="Object Lesson" class="logo-sm">
      </a>
      <div style="width:20px"></div>
    </header>

    <div class="detail-scroll-hint" id="detail-scroll-hint">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </div>
    <div class="detail-body">
      <div class="detail-gallery">
        <div class="detail-carousel" id="detail-carousel">
          <div class="detail-track" id="detail-track"></div>
        </div>
        <div class="detail-thumbs" id="detail-thumbs"></div>
      </div>

      <div class="detail-info">
        <span class="detail-sold" id="detail-sold" style="display:none">Sold</span>
        <span class="detail-hold" id="detail-hold" style="display:none">On Hold</span>
        <span class="detail-new" id="detail-new" style="display:none">New</span>
        <h1 class="detail-title" id="detail-title"></h1>
        <div class="detail-price" id="detail-price"></div>
        <div class="detail-discount-price" id="detail-discount-price" style="display:none"></div>
        <div class="detail-tax" id="detail-tax" style="display:none"></div>
        <div class="detail-total" id="detail-total" style="display:none"></div>
        <div class="detail-size" id="detail-size"></div>
        <p class="detail-desc" id="detail-desc"></p>
        <div class="detail-discount" id="detail-discount" style="display:none">
          <div class="discount-input-wrap" id="discount-input-wrap">
            <input type="text" class="discount-input" id="discount-input" placeholder="Discount code">
            <button class="discount-apply" id="discount-apply">Apply</button>
          </div>
          <div class="discount-applied" id="discount-applied" style="display:none">
            <span class="discount-badge" id="discount-badge"></span>
            <button class="discount-remove" id="discount-remove">&times;</button>
          </div>
        </div>
        <div class="detail-actions" id="detail-actions">
          <button class="detail-buy" id="detail-buy">Buy Now</button>
          <a class="detail-inquire" id="detail-inquire">Inquire</a>
          <button class="detail-share" id="detail-share" aria-label="Share">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
          </button>
        </div>
        <div class="detail-email-gate" id="detail-email-gate" style="display:none">
          <p class="email-gate-label">Enter your email to complete purchase</p>
          <div class="email-gate-row">
            <input type="email" class="email-gate-input" id="email-gate-input" placeholder="you@email.com" required>
            <button class="email-gate-btn" id="email-gate-btn">Continue to Checkout</button>
          </div>
        </div>
        <p class="detail-shipping" id="detail-shipping">Free pickup in Pasadena. LA delivery available.<br>Shipping at lowest available rate — calculated after purchase.</p>
        <div class="detail-purchased" id="detail-purchased" style="display:none">
          <p class="purchased-thanks">Thank you for your purchase!</p>
          <p class="purchased-info">Your item will be available for pickup at Object Lesson at the <strong>Pasadena Antique Center</strong>.</p>
          <p class="purchased-info">To arrange other pickup or shipping options, <a id="purchased-sms" href="#">send us a text</a>.</p>
        </div>
        <div class="detail-id" id="detail-id"></div>
      </div>
    </div>

    <footer>
      <div class="footer-inner">
        <span class="footer-copy">Object Lesson 2026</span>
        <div class="footer-links">
          <a href="https://instagram.com/objectlesson_la" target="_blank" rel="noopener"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/></svg></a>
          <a href="sms:3104985138">Contact</a>
        </div>
      </div>
    </footer>
  </div>

  <!-- Not Found View -->
  <div id="view-notfound" style="display:none">
    <header class="detail-header">
      <button class="detail-back" id="btn-notfound-back">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
      </button>
      <a href="/">
        <img src="OL_logo.svg" alt="Object Lesson" class="logo-sm">
      </a>
      <div style="width:20px"></div>
    </header>
    <div class="notfound-body">
      <p class="notfound-msg">This item is no longer available.</p>
      <a href="/" class="notfound-link" id="notfound-browse">Browse all items</a>
    </div>
  </div>

  <!-- About View -->
  <div id="view-about" style="display:none">
    <header class="detail-header">
      <button class="detail-back" id="btn-about-back">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
      </button>
      <a href="/">
        <img src="OL_logo.svg" alt="Object Lesson" class="logo-sm">
      </a>
      <div style="width:20px"></div>
    </header>
    <div class="about-body">
      <p class="about-tagline">Uncommon Objects, Art and Design</p>
      <p class="about-founders">Eli Kagan &amp; Megan Gage</p>
      <div class="about-details">
        <p class="about-location">
          <a href="https://maps.google.com/?q=480+S+Fair+Oaks+Ave,+Pasadena,+CA+91105" target="_blank" rel="noopener">480 S. Fair Oaks Ave<br>Pasadena, CA 91105</a>
        </p>
        <p class="about-context">In the Pasadena Antique Center</p>
        <div class="about-links">
          <a href="mailto:eli@objectlesson.la">eli@objectlesson.la</a>
          <a href="https://instagram.com/objectlesson_la" target="_blank" rel="noopener">@objectlesson_la</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Email Capture Bar -->
  <div class="email-bar" id="email-bar" style="display:none">
    <button class="email-bar-close" id="email-bar-close">&times;</button>
    <p class="email-bar-offer">Get 10% off your first purchase</p>
    <form class="email-bar-form" id="email-bar-form">
      <input type="email" class="email-bar-input" id="email-bar-input" placeholder="Enter your email" required>
      <button type="submit" class="email-bar-btn">Get Code</button>
    </form>
    <div class="email-bar-success" id="email-bar-success" style="display:none">
      <p>Your code: <strong>WELCOME10</strong></p>
      <p class="email-bar-hint">Enter it on any item page for 10% off</p>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
